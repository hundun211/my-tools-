<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>å¿ƒæƒ…é¤å•</title>
<style>
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;background:linear-gradient(180deg,#FFF7E8,#FFE0B8);color:#333}
header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;background:#fff;box-shadow:0 2px 8px rgba(0,0,0,.08)}
.avatar{width:36px;height:36px;border-radius:50%;background:#ffb703;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700}
.header-center{font-size:18px;font-weight:600}
.header-right{display:flex;gap:14px;font-size:22px;cursor:pointer}
main{padding:18px}
.card{background:#fff;border-radius:18px;padding:20px;margin-bottom:18px;box-shadow:0 8px 20px rgba(0,0,0,.08)}
.day{font-size:28px;font-weight:700;color:#ff7a00;text-align:center}
.period{text-align:center;color:#555;margin-top:6px}
.time{text-align:center;color:#999;margin-top:2px}
.meals{display:flex;flex-direction:column;gap:14px}
.meal-card{background:#fff;border-radius:16px;padding:18px;box-shadow:0 6px 16px rgba(0,0,0,.08)}
.meal-title{font-size:18px;font-weight:600;display:flex;align-items:center;gap:8px}
.meal-result{margin-top:10px;color:#999;text-align:center}
.primary{width:100%;padding:18px;border:none;border-radius:16px;background:linear-gradient(90deg,#4ade80,#60a5fa);color:#fff;font-size:20px;font-weight:700;box-shadow:0 10px 24px rgba(0,0,0,.15)}
.primary:disabled{background:#e5e7eb;color:#9ca3af;box-shadow:none}
.page{display:none}
.page.active{display:block}
/* settings */
.tabs{display:flex;gap:6px;margin-bottom:14px}
.tab{flex:1;text-align:center;padding:10px;border-radius:12px;background:#f3f4f6;cursor:pointer}
.tab.active{background:#3b82f6;color:#fff;font-weight:600}
.input-box{border:2px dashed #f1c27d;border-radius:16px;padding:16px;margin-bottom:14px;text-align:center}
.list{background:#f8fafc;border-radius:14px;padding:14px;min-height:80px}
.list.empty{color:#aaa;text-align:center}
.list div{background:#fff;padding:10px 12px;border-radius:10px;margin-bottom:8px;display:flex;justify-content:space-between}
.list span{color:#ef4444;cursor:pointer}
.footer-btns{display:flex;gap:12px;margin-top:20px}
.secondary{flex:1;padding:14px;border:none;border-radius:14px;font-size:16px}
.sync{background:#3b82f6;color:#fff}
.back{background:#4b5563;color:#fff}
</style>
</head>
<body>
<header>
<div class="avatar">ğŸ´</div>
<div class="header-center">å¿ƒæƒ…é¤å•</div>
<div class="header-right">
<div onclick="share()">ğŸ”—</div>
<div onclick="openSettings()">â‰¡</div>
</div>
</header>

<!-- HOME -->
<main id="home" class="page active">
<div class="card">
<div class="day" id="day"></div>
<div class="period" id="period"></div>
<div class="time" id="clock"></div>
</div>

<div class="meals">
<div class="meal-card"><div class="meal-title">ğŸ æ—©é¤</div><div class="meal-result" id="r-æ—©é¤">ç‚¹å‡»ç”ŸæˆæŒ‰é’®å¼€å§‹</div></div>
<div class="meal-card"><div class="meal-title">ğŸ” åˆé¤</div><div class="meal-result" id="r-åˆé¤">ç‚¹å‡»ç”ŸæˆæŒ‰é’®å¼€å§‹</div></div>
<div class="meal-card"><div class="meal-title">ğŸ½ï¸ æ™šé¤</div><div class="meal-result" id="r-æ™šé¤">ç‚¹å‡»ç”ŸæˆæŒ‰é’®å¼€å§‹</div></div>
</div>

<button class="primary" onclick="spinAll()">âœ¨ éšæœºç”Ÿæˆ</button>
</main>

<!-- SETTINGS -->
<main id="settings" class="page">
<div class="tabs">
<div class="tab active" onclick="switchTab('æ—©é¤',this)">æ—©é¤</div>
<div class="tab" onclick="switchTab('åˆé¤',this)">åˆé¤</div>
<div class="tab" onclick="switchTab('æ™šé¤',this)">æ™šé¤</div>
<div class="tab" onclick="switchTab('æ•°æ®',this)">æ•°æ®</div>
</div>
<div class="card">
<div class="input-box"><input id="input" placeholder="è¾“å…¥èœå“" style="border:none;outline:none;width:100%;text-align:center" /></div>
<div id="list" class="list empty">æš‚æ— èœå“ï¼Œè¯·æ·»åŠ </div>
<div class="footer-btns">
<button class="secondary sync" onclick="sync()">ğŸ”„ æ‰‹åŠ¨åŒæ­¥</button>
<button class="secondary back" onclick="back()">ğŸ  è¿”å›ä¸»ç•Œé¢</button>
</div>
</div>
</main>

<script>
const key='flash_meal';
let tab='æ—©é¤';
const def={æ—©é¤:[],åˆé¤:[],æ™šé¤:[]};
const get=()=>JSON.parse(localStorage.getItem(key))||JSON.parse(JSON.stringify(def));
const save=d=>localStorage.setItem(key,JSON.stringify(d));

function updateTime(){const d=new Date();const w=['æ˜ŸæœŸæ—¥','æ˜ŸæœŸä¸€','æ˜ŸæœŸäºŒ','æ˜ŸæœŸä¸‰','æ˜ŸæœŸå››','æ˜ŸæœŸäº”','æ˜ŸæœŸå…­'];document.getElementById('day').innerText=w[d.getDay()];document.getElementById('clock').innerText=d.toTimeString().slice(0,5);let p='æ—©é¤';if(d.getHours()>=10&&d.getHours()<16)p='åˆé¤';if(d.getHours()>=16)p='æ™šé¤';document.getElementById('period').innerText=p+'æ—¶é—´';}

function spin(type){const arr=get()[type];if(!arr.length)return 'æœªæ·»åŠ ';return arr[Math.floor(Math.random()*arr.length)];}
function spinAll(){['æ—©é¤','åˆé¤','æ™šé¤'].forEach(t=>{document.getElementById('r-'+t).innerText=spin(t)});}

function openSettings(){home.classList.remove('active');settings.classList.add('active');render()}
function back(){settings.classList.remove('active');home.classList.add('active');updateTime()}

function switchTab(t,el){tab=t;document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));el.classList.add('active');render()}

function render(){const d=get();const l=document.getElementById('list');if(tab==='æ•°æ®'){l.innerHTML='<button class="secondary sync" onclick="backup()">å¤‡ä»½æ•°æ®</button><br><br><button class="secondary back" onclick="restore()">æ¢å¤æ•°æ®</button>';return;}const arr=d[tab];if(!arr.length){l.className='list empty';l.innerText='æš‚æ— èœå“ï¼Œè¯·æ·»åŠ ';return;}l.className='list';l.innerHTML='';arr.forEach((m,i)=>{const div=document.createElement('div');div.innerHTML=`${m}<span onclick=del(${i})>åˆ é™¤</span>`;l.appendChild(div)});}

input.onkeydown=e=>{if(e.key==='Enter'){const v=input.value.trim();if(!v)return;const d=get();if(!d[tab].includes(v)){d[tab].push(v);save(d);}input.value='';render();}};
function del(i){const d=get();if(confirm('ç¡®å®šåˆ é™¤ï¼Ÿ')){d[tab].splice(i,1);save(d);render();}}
function sync(){save(get());alert('å·²åŒæ­¥')}
function backup(){alert('æ•°æ®å·²åœ¨æœ¬åœ°ä¿å­˜')}
function restore(){localStorage.removeItem(key);alert('å·²æ¢å¤');render()}
function share(){navigator.clipboard.writeText(location.href);alert('åˆ†äº«é“¾æ¥å·²å¤åˆ¶ï¼Œå¯ç›´æ¥åœ¨å¾®ä¿¡æ‰“å¼€')}

updateTime();
</script>
</body>
</html>
